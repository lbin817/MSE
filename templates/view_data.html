<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>데이터베이스 보기 - 예산 관리 시스템</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .data-section {
            margin-bottom: 2rem;
        }
        .data-card {
            border: 1px solid #dee2e6;
            border-radius: 0.375rem;
            margin-bottom: 1rem;
        }
        .data-header {
            background-color: #f8f9fa;
            padding: 1rem;
            border-bottom: 1px solid #dee2e6;
            font-weight: bold;
        }
        .data-body {
            padding: 1rem;
        }
        .json-data {
            background-color: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 0.25rem;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            font-size: 0.9rem;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
        .team-info {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
        }
        .purchase-info {
            background-color: #f3e5f5;
            border-left: 4px solid #9c27b0;
        }
        .multi-purchase-info {
            background-color: #e8f5e8;
            border-left: 4px solid #4caf50;
        }
        .other-request-info {
            background-color: #fff3e0;
            border-left: 4px solid #ff9800;
        }
    </style>
</head>
<body>
    <div class="container-fluid mt-4">
        <div class="row">
            <div class="col-12">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h1><i class="fas fa-database me-2"></i>데이터베이스 보기</h1>
                    <div>
                        <a href="{{ url_for('admin') }}" class="btn btn-secondary">
                            <i class="fas fa-arrow-left me-2"></i>관리자 페이지로 돌아가기
                        </a>
                    </div>
                </div>

                <!-- 팀 정보 -->
                <div class="data-section">
                    <h2><i class="fas fa-users me-2"></i>팀 정보 ({{ teams|length }}개)</h2>
                    <div class="data-card team-info">
                        <div class="data-header">
                            <i class="fas fa-info-circle me-2"></i>팀 데이터
                        </div>
                        <div class="data-body">
                            <div class="json-data">{{ teams | tojson(indent=2) }}</div>
                        </div>
                    </div>
                </div>

                <!-- 구매내역 -->
                <div class="data-section">
                    <h2><i class="fas fa-shopping-cart me-2"></i>구매내역 ({{ purchases|length }}개)</h2>
                    <div class="data-card purchase-info">
                        <div class="data-header">
                            <i class="fas fa-receipt me-2"></i>단일 품목 구매내역
                        </div>
                        <div class="data-body">
                            <div class="json-data">{{ purchases | tojson(indent=2) }}</div>
                        </div>
                    </div>
                </div>

                <!-- 다중 구매내역 -->
                <div class="data-section">
                    <h2><i class="fas fa-shopping-basket me-2"></i>다중 구매내역 ({{ multi_purchases|length }}개)</h2>
                    <div class="data-card multi-purchase-info">
                        <div class="data-header">
                            <i class="fas fa-list me-2"></i>다중 품목 구매내역
                        </div>
                        <div class="data-body">
                            <div class="json-data">{{ multi_purchases | tojson(indent=2) }}</div>
                        </div>
                    </div>
                </div>

                <!-- 기타 요청 -->
                <div class="data-section">
                    <h2><i class="fas fa-question-circle me-2"></i>기타 요청 ({{ other_requests|length }}개)</h2>
                    <div class="data-card other-request-info">
                        <div class="data-header">
                            <i class="fas fa-comment me-2"></i>기타 요청 데이터
                        </div>
                        <div class="data-body">
                            <div class="json-data">{{ other_requests | tojson(indent=2) }}</div>
                        </div>
                    </div>
                </div>

                <!-- 요약 정보 -->
                <div class="data-section">
                    <h2><i class="fas fa-chart-bar me-2"></i>요약 정보</h2>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h5 class="card-title text-primary">{{ teams|length }}</h5>
                                    <p class="card-text">총 팀 수</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h5 class="card-title text-success">{{ purchases|length }}</h5>
                                    <p class="card-text">단일 구매내역</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h5 class="card-title text-info">{{ multi_purchases|length }}</h5>
                                    <p class="card-text">다중 구매내역</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card text-center">
                                <div class="card-body">
                                    <h5 class="card-title text-warning">{{ other_requests|length }}</h5>
                                    <p class="card-text">기타 요청</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 새로고침 버튼 -->
                <div class="text-center mt-4">
                    <button onclick="location.reload()" class="btn btn-primary btn-lg">
                        <i class="fas fa-sync-alt me-2"></i>새로고침
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
